<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="2021.09_001" context="upgrade_2021_08_to_2021_09" author="backbase" dbms="mysql,mariadb,mssql,oracle">
        <comment>Add new business function Loans Payment</comment>
        <insert tableName="business_function">
            <column name="id" value="1101"/>
            <column name="function_code" value="loans.payment"/>
            <column name="function_name" value="Loans Payment"/>
            <column name="resource_code" value="payments"/>
            <column name="resource_name" value="Payments"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="372"/>
            <column name="business_function_name" value="Loans Payment"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="view"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1101"/>
            <column name="privilege_id" value="2"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="373"/>
            <column name="business_function_name" value="Loans Payment"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="create"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1101"/>
            <column name="privilege_id" value="3"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="374"/>
            <column name="business_function_name" value="Loans Payment"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="edit"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1101"/>
            <column name="privilege_id" value="4"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="375"/>
            <column name="business_function_name" value="Loans Payment"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="delete"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1101"/>
            <column name="privilege_id" value="5"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="376"/>
            <column name="business_function_name" value="Loans Payment"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="approve"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1101"/>
            <column name="privilege_id" value="6"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="377"/>
            <column name="business_function_name" value="Loans Payment"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="cancel"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1101"/>
            <column name="privilege_id" value="7"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="372"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="373"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="374"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="375"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="376"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="377"/>
        </insert>
    </changeSet>

    <changeSet id="2021.09_002" context="upgrade_2021_08_to_2021_09" author="backbase" dbms="mysql,mariadb,mssql,oracle">
        <comment>Add new business function Loans Advance</comment>
        <insert tableName="business_function">
            <column name="id" value="1102"/>
            <column name="function_code" value="loans.advance"/>
            <column name="function_name" value="Loans Advance"/>
            <column name="resource_code" value="payments"/>
            <column name="resource_name" value="Payments"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="378"/>
            <column name="business_function_name" value="Loans Advance"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="view"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1102"/>
            <column name="privilege_id" value="2"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="379"/>
            <column name="business_function_name" value="Loans Advance"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="create"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1102"/>
            <column name="privilege_id" value="3"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="380"/>
            <column name="business_function_name" value="Loans Advance"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="edit"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1102"/>
            <column name="privilege_id" value="4"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="381"/>
            <column name="business_function_name" value="Loans Advance"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="delete"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1102"/>
            <column name="privilege_id" value="5"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="382"/>
            <column name="business_function_name" value="Loans Advance"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="approve"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1102"/>
            <column name="privilege_id" value="6"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="383"/>
            <column name="business_function_name" value="Loans Advance"/>
            <column name="function_resource_name" value="Payments"/>
            <column name="privilege_name" value="cancel"/>
            <column name="supports_limit" value="1"/>
            <column name="business_function_id" value="1102"/>
            <column name="privilege_id" value="7"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="378"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="379"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="380"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="381"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="382"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="383"/>
        </insert>
    </changeSet>

    <changeSet id="2021.09_003" context="upgrade_2021_08_to_2021_09" author="backbase" >
        <tagDatabase tag="2021.09"/>
    </changeSet>

</databaseChangeLog>
