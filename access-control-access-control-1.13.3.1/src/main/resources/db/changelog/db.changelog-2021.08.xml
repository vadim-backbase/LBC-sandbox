<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="2021.08_001" context="upgrade_2021_07_to_2021_08" author="backbase" dbms="mysql,mariadb,mssql,oracle">
        <comment>Add new business functions</comment>
        <insert tableName="business_function">
            <column name="id" value="1100"/>
            <column name="function_code" value="manage.content"/>
            <column name="function_name" value="Manage Content"/>
            <column name="resource_code" value="content"/>
            <column name="resource_name" value="Content"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="368"/>
            <column name="business_function_name" value="Manage Content"/>
            <column name="function_resource_name" value="Content"/>
            <column name="privilege_name" value="view"/>
            <column name="supports_limit" value="0"/>
            <column name="business_function_id" value="1100"/>
            <column name="privilege_id" value="2"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="369"/>
            <column name="business_function_name" value="Manage Content"/>
            <column name="function_resource_name" value="Content"/>
            <column name="privilege_name" value="create"/>
            <column name="supports_limit" value="0"/>
            <column name="business_function_id" value="1100"/>
            <column name="privilege_id" value="3"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="370"/>
            <column name="business_function_name" value="Manage Content"/>
            <column name="function_resource_name" value="Content"/>
            <column name="privilege_name" value="edit"/>
            <column name="supports_limit" value="0"/>
            <column name="business_function_id" value="1100"/>
            <column name="privilege_id" value="4"/>
        </insert>
        <insert tableName="applicable_function_privilege">
            <column name="id" value="371"/>
            <column name="business_function_name" value="Manage Content"/>
            <column name="function_resource_name" value="Content"/>
            <column name="privilege_name" value="delete"/>
            <column name="supports_limit" value="0"/>
            <column name="business_function_id" value="1100"/>
            <column name="privilege_id" value="5"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="368"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="369"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="370"/>
        </insert>
        <insert tableName="assignable_permission_set_item">
            <column name="assignable_permission_set_id" value="1"/>
            <column name="function_privilege_id" value="371"/>
        </insert>
    </changeSet>

    <changeSet id="2021.08_002" context="upgrade_2021_07_to_2021_08" author="backbase" >
        <tagDatabase tag="2021.08"/>
    </changeSet>

</databaseChangeLog>
